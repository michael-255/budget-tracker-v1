import{k as D,K as I,A as b,L as h,Y as k,r as B,l as V,D as u,ak as m,N as C,m as r,n as p,w as f,p as l,F as v,O as R,x as n,J as S,t as a,z as A,I as s,P as F,T as N,Q,al as U}from"./index-39bc25f1.js";import{Q as $}from"./QForm-01221c71.js";import{_ as T}from"./ResponsivePage.vue_vue_type_script_setup_true_lang-5b1b2159.js";import{u as q}from"./action-b2448e0a.js";import{c as L}from"./useDialogs-343bdfb7.js";import{u as j}from"./useRouting-6bc4eda0.js";import"./QItemSection-fe6eee11.js";import"./QList-37d01421.js";const M={class:"row justify-center q-my-sm"},z={class:"row justify-center"},J=a("span",{class:"text-caption q-ml-xs text-warning"}," Correct invalid entries and try again ",-1),ee=D({__name:"EditView",setup(K){I({title:`${b} - Edit Record`});const{routeId:E,goBack:_}=j(),{log:i}=h(),{confirmDialog:g}=L(),t=q(),w=k.getFieldComponents(),c=B(!0);V(async()=>{try{const e=await u.getExpense(E);if(e)m(!0,t.record,e);else throw new Error("Record not found")}catch(e){i.error("Error loading edit view",e)}}),C(()=>{t.$reset()});async function x(){g("Update","Update this Expense record?",s.EDIT,"positive",async()=>{try{await u.putExpense(m(!0,{},t.record)),i.info("Record updated",{id:t.record.id}),_()}catch(e){i.error("Update failed",e)}})}return(e,o)=>(r(),p(T,{bannerIcon:n(s).EDIT,bannerTitle:"Edit Expense"},{default:f(()=>[l($,{onSubmit:x,onValidationError:o[0]||(o[0]=d=>c.value=!1),onValidationSuccess:o[1]||(o[1]=d=>c.value=!0)},{default:f(()=>[(r(!0),v(S,null,R(n(w),(d,y)=>(r(),v("div",{key:y,class:"q-mb-md"},[(r(),p(U(d)))]))),128)),a("div",M,[l(A,{label:"Update",type:"submit",color:"positive",icon:n(s).SAVE},null,8,["icon"])]),a("div",z,[F(a("div",null,[l(Q,{name:n(s).WARN,color:"warning"},null,8,["name"]),J],512),[[N,!c.value]])])]),_:1})]),_:1},8,["bannerIcon"]))}});export{ee as default};
