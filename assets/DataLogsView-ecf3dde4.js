import{Q as L,a as y,b as k,c as B}from"./QTable-677b0733.js";import{k as O,K as q,A,L as E,r,U as F,D as Q,N as U,m as i,n as f,w as o,p as t,F as T,O as V,J as x,G as c,z as C,x as u,I as b,t as d,Q as D,V as P,v as g,W as $,X as j,P as G,T as R}from"./index-63ca9a3c.js";import{Q as z}from"./QSelect-8f852d43.js";import{u as J}from"./useRouting-5b808252.js";import{c as K}from"./useDialogs-3310041d.js";import"./QList-6ae2ca5c.js";import"./QChip-df42d9fb.js";import"./QItemSection-7ce6632d.js";import"./QItemLabel-9cf43daf.js";import"./QMenu-c8e63002.js";import"./selection-98805e7f.js";import"./action-91bf94ea.js";const M={class:"row justify-start full-width q-mb-md"},W=d("div",{class:"col-10 text-h6 text-bold ellipsis"},"Logs",-1),X={class:"row justify-start full-width"},H={class:"col-12"},de=O({__name:"DataLogsView",setup(Y){q({title:`${A} - Logs Data Table`});const{log:h}=E(),{goBack:I}=J(),{inspectDialog:N}=K(),m=r(""),n=r([]),_=r(F.getTableColumns()),w=r(_.value.filter(s=>!s.required)),p=r(w.value.map(s=>s.name)),v=Q.liveLogs().subscribe({next:s=>n.value=s,error:s=>h.error("Error fetching live Logs",s)});U(()=>{v==null||v.unsubscribe()});async function S(s){const a=await Q.getLog(Number(s));a?N(a,j.LOGS):h.error("Failed to find Log",{autoId:s})}return(s,a)=>(i(),f(B,{rows:n.value,columns:_.value,"visible-columns":p.value,"rows-per-page-options":[0],filter:m.value,"virtual-scroll":"",fullscreen:"","row-key":"id"},{header:o(e=>[t(y,{props:e},{default:o(()=>[(i(!0),T(x,null,V(e.cols,l=>G((i(),f(L,{key:l.name,props:e},{default:o(()=>[c(g(l.label),1)]),_:2},1032,["props"])),[[R,l.name!=="hiddenAutoId"]])),128)),t(L,{"auto-width":"",class:"text-left"},{default:o(()=>[c("Actions")]),_:1})]),_:2},1032,["props"])]),body:o(e=>[t(y,{props:e},{default:o(()=>[(i(!0),T(x,null,V(e.cols,l=>(i(),f(k,{key:l.name,props:e},{default:o(()=>[c(g(l.value),1)]),_:2},1032,["props"]))),128)),t(k,{"auto-width":""},{default:o(()=>[t(C,{flat:"",round:"",dense:"",class:"q-ml-xs",color:"primary",icon:u(b).INSPECT,onClick:l=>S(e.cols[0].value)},null,8,["icon","onClick"])]),_:2},1024)]),_:2},1032,["props"])]),top:o(()=>[d("div",M,[W,t(C,{round:"",flat:"",class:"absolute-top-right q-mr-sm q-mt-sm",icon:u(b).CLOSE,onClick:a[0]||(a[0]=e=>u(I)())},null,8,["icon"])]),d("div",X,[d("div",H,[t(P,{disable:!n.value.length,outlined:"",dense:"",clearable:"",debounce:"300",modelValue:m.value,"onUpdate:modelValue":a[2]||(a[2]=e=>m.value=e),placeholder:"Search"},{before:o(()=>[t(z,{modelValue:p.value,"onUpdate:modelValue":a[1]||(a[1]=e=>p.value=e),options:w.value,disable:!n.value.length,"bg-color":"primary",standout:"",multiple:"",dense:"","options-dense":"","emit-value":"","map-options":"","option-value":"name","display-value":""},{prepend:o(()=>[t(D,{color:"white",name:u(b).OPTIONS},null,8,["name"])]),_:1},8,["modelValue","options","disable"])]),append:o(()=>[t(D,{name:"search"})]),_:1},8,["disable","modelValue"])])])]),bottom:o(()=>[c(g(u($)(n.value)),1)]),_:1},8,["rows","columns","visible-columns","filter"]))}});export{de as default};
