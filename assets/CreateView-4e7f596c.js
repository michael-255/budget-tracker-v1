import{k as E,K as y,A as w,L as b,Y as m,r as k,l as A,N as B,m as o,n as u,w as p,p as l,F as f,O as D,x as a,J as V,t as d,z as h,I as s,P as R,T as S,Q as F,aj as I,D as N,ak as Q,al as $}from"./index-54cdbb61.js";import{Q as T}from"./QForm-493871e7.js";import{_ as j}from"./ResponsivePage.vue_vue_type_script_setup_true_lang-9884d1b8.js";import{u as q}from"./action-dd1e0109.js";import{c as L}from"./useDialogs-32c148ce.js";import{u as M}from"./useRouting-f8a48c74.js";import"./QItemSection-0e024dbb.js";import"./QList-615720ed.js";const z={class:"row justify-center q-my-sm"},J={class:"row justify-center"},K=d("span",{class:"text-caption q-ml-xs text-warning"}," Correct invalid entries and try again ",-1),ee=E({__name:"CreateView",setup(O){y({title:`${w} - Create Expense`});const{goBack:v}=M(),{log:n}=b(),{confirmDialog:C}=L(),e=q(),_=m.getFieldComponents(),i=k(!0);A(async()=>{try{e.record=m.getDefaultRecord()}catch(t){n.error("Error loading create view",t)}}),B(()=>{e.$reset()});async function g(){C("Create","Create this Expense record?",s.CREATE,"positive",async()=>{try{e.record.id=I(),await N.addExpense(Q(!0,{},e.record)),n.info("Record created",{id:e.record.id}),v()}catch(t){n.error("Create failed",t)}})}return(t,r)=>(o(),u(j,{bannerIcon:a(s).CREATE,bannerTitle:"Create Expense"},{default:p(()=>[l(T,{onSubmit:g,onValidationError:r[0]||(r[0]=c=>i.value=!1),onValidationSuccess:r[1]||(r[1]=c=>i.value=!0)},{default:p(()=>[(o(!0),f(V,null,D(a(_),(c,x)=>(o(),f("div",{key:x,class:"q-mb-md"},[(o(),u($(c)))]))),128)),d("div",z,[l(h,{label:"Create",type:"submit",color:"positive",icon:a(s).SAVE},null,8,["icon"])]),R(d("div",J,[l(F,{name:a(s).WARN,color:"warning"},null,8,["name"]),K],512),[[S,!i.value]])]),_:1})]),_:1},8,["bannerIcon"]))}});export{ee as default};
